<!--<!DOCTYPE html> -->
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ“º Ø³ÙŠØ±ÙØ±Ø§Øª IPTV</title>
<style>
body { font-family: Tahoma, Arial; background: #f4f4f4; margin:0; padding:0; direction:rtl; }
header {background: #007bff; color:white; padding:15px; text-align:center; font-size:20px; position:relative;}
.admin-btn {position:absolute; left:15px; top:15px; background:#ff9800; color:white; padding:8px 15px; text-decoration:none; border-radius:5px; font-size:14px;}
.container {max-width:900px; margin:auto; padding:20px;}
.server-card {background:white; padding:15px; margin-bottom:15px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
.server-card h3 {margin:0; color:#333;}
.download-btn {background:#28a745; color:white; border:none; padding:10px 15px; cursor:pointer; border-radius:5px; margin-top:10px;}
.ads {text-align:center; margin:25px 0; background:#fff; padding:15px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); min-height:100px;}
#countdownOverlay {position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);display:none;justify-content:center;align-items:center;flex-direction:column;color:white;z-index:9999;}
#countdownOverlay p {font-size:24px;margin-bottom:15px;}
footer {text-align:center; padding:15px; font-size:14px; color:#666; background:#eee; margin-top:30px;}
</style>
</head>
<body>

<header>
ğŸ“¡ Ø³ÙŠØ±ÙØ±Ø§Øª IPTV Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©
<a class="admin-btn" href="admin/dashboard.html">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
</header>

<div class="container">

<div class="ads" id="adsense-area"></div>

<h2>ğŸ“‚ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø©</h2>
<div id="servers"></div>

</div>

<!-- Ø¹Ø¯Ø§Ø¯ ØªØ­Ù…ÙŠÙ„ -->
<div id="countdownOverlay">
  <div class="ads" id="adContainer"></div>
  <p>Ø³ÙŠØ¨Ø¯Ø£ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ø¹Ø¯ <span id="countdown">15</span> Ø«Ø§Ù†ÙŠØ©</p>
</div>

<footer>
Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025 â€” Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø³ÙŠØ±ÙØ±Ø§Øª IPTV  
</footer>

<script>
// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† LocalStorage
const db = JSON.parse(localStorage.getItem("ix_database_v1")) || { servers: [], adsense_code:"" };
const serversDiv = document.getElementById("servers");
const adsDiv = document.getElementById("adsense-area");

// Ø¹Ø±Ø¶ ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰
adsDiv.innerHTML = db.adsense_code || "<p>ğŸ›‘ Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ AdSense Ø¨Ø¹Ø¯.</p>";

// Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ù…Ø¹ Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ + Ø¹Ø¯Ø§Ø¯ ØªÙ†Ø§Ø²Ù„ÙŠ
if(db.servers.length > 0){
  db.servers.forEach(srv => {
    serversDiv.innerHTML += `
      <div class="server-card">
        <h3>${srv.name}</h3>
        <p>ğŸ“† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©: ${srv.expire || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©"}</p>
        <p>ğŸ“¦ Ø§Ù„Ù†ÙˆØ¹: ${srv.type || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}</p>
        <button class="download-btn" onclick="startCountdown('${srv.url}')">â¬‡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±</button>
      </div>
    `;
  });
} else {
  serversDiv.innerHTML = "<p>âš  Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³ÙŠØ±ÙØ±Ø§Øª Ù…ØªØ§Ø­Ø© Ø§Ù„Ø¢Ù†ØŒ Ù‚Ù… Ø¨Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….</p>";
}

// --- Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ ---
const overlay = document.getElementById("countdownOverlay");
const countdownEl = document.getElementById("countdown");
const adContainer = document.getElementById("adContainer");
let countdownInterval;

function startCountdown(url){
  adContainer.innerHTML = db.adsense_code || "<p>ğŸ›‘ Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ AdSense Ø¨Ø¹Ø¯.</p>";
  overlay.style.display = "flex";
  let counter = 15; // 15 Ø«Ø§Ù†ÙŠØ©
  countdownEl.textContent = counter;

  countdownInterval = setInterval(()=>{
    counter--;
    countdownEl.textContent = counter;
    if(counter <= 0){
      clearInterval(countdownInterval);
      overlay.style.display = "none";
      window.open(url, '_blank');
 // Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙŠØ¨Ø¯Ø£ Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ø¯
    }
  }, 1000);
}
</script>

</body>
</html>
